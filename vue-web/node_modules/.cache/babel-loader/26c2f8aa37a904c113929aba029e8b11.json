{"ast":null,"code":"import raf from '../../_util/raf';\nimport { onBeforeUnmount, ref, shallowRef } from 'vue';\nexport function useLayoutState(defaultState) {\n  var stateRef = shallowRef(defaultState);\n  var rafId;\n  var updateBatchRef = shallowRef([]);\n\n  function setFrameState(updater) {\n    updateBatchRef.value.push(updater);\n    raf.cancel(rafId);\n    rafId = raf(function () {\n      var prevBatch = updateBatchRef.value; // const prevState = stateRef.value;\n\n      updateBatchRef.value = [];\n      prevBatch.forEach(function (batchUpdater) {\n        stateRef.value = batchUpdater(stateRef.value);\n      });\n    });\n  }\n\n  onBeforeUnmount(function () {\n    raf.cancel(rafId);\n  });\n  return [stateRef, setFrameState];\n}\n/** Lock frame, when frame pass reset the lock. */\n\nexport function useTimeoutLock(defaultState) {\n  var frameRef = ref(defaultState || null);\n  var timeoutRef = ref();\n\n  function cleanUp() {\n    clearTimeout(timeoutRef.value);\n  }\n\n  function setState(newState) {\n    frameRef.value = newState;\n    cleanUp();\n    timeoutRef.value = setTimeout(function () {\n      frameRef.value = null;\n      timeoutRef.value = undefined;\n    }, 100);\n  }\n\n  function getState() {\n    return frameRef.value;\n  }\n\n  onBeforeUnmount(function () {\n    cleanUp();\n  });\n  return [setState, getState];\n}","map":{"version":3,"names":["raf","onBeforeUnmount","ref","shallowRef","useLayoutState","defaultState","stateRef","rafId","updateBatchRef","setFrameState","updater","value","push","cancel","prevBatch","forEach","batchUpdater","useTimeoutLock","frameRef","timeoutRef","cleanUp","clearTimeout","setState","newState","setTimeout","undefined","getState"],"sources":["C:/Users/USTC/Desktop/community1/vue-web/node_modules/ant-design-vue/es/vc-table/hooks/useFrame.js"],"sourcesContent":["import raf from '../../_util/raf';\nimport { onBeforeUnmount, ref, shallowRef } from 'vue';\nexport function useLayoutState(defaultState) {\n  var stateRef = shallowRef(defaultState);\n  var rafId;\n  var updateBatchRef = shallowRef([]);\n\n  function setFrameState(updater) {\n    updateBatchRef.value.push(updater);\n    raf.cancel(rafId);\n    rafId = raf(function () {\n      var prevBatch = updateBatchRef.value; // const prevState = stateRef.value;\n\n      updateBatchRef.value = [];\n      prevBatch.forEach(function (batchUpdater) {\n        stateRef.value = batchUpdater(stateRef.value);\n      });\n    });\n  }\n\n  onBeforeUnmount(function () {\n    raf.cancel(rafId);\n  });\n  return [stateRef, setFrameState];\n}\n/** Lock frame, when frame pass reset the lock. */\n\nexport function useTimeoutLock(defaultState) {\n  var frameRef = ref(defaultState || null);\n  var timeoutRef = ref();\n\n  function cleanUp() {\n    clearTimeout(timeoutRef.value);\n  }\n\n  function setState(newState) {\n    frameRef.value = newState;\n    cleanUp();\n    timeoutRef.value = setTimeout(function () {\n      frameRef.value = null;\n      timeoutRef.value = undefined;\n    }, 100);\n  }\n\n  function getState() {\n    return frameRef.value;\n  }\n\n  onBeforeUnmount(function () {\n    cleanUp();\n  });\n  return [setState, getState];\n}"],"mappings":"AAAA,OAAOA,GAAP,MAAgB,iBAAhB;AACA,SAASC,eAAT,EAA0BC,GAA1B,EAA+BC,UAA/B,QAAiD,KAAjD;AACA,OAAO,SAASC,cAAT,CAAwBC,YAAxB,EAAsC;EAC3C,IAAIC,QAAQ,GAAGH,UAAU,CAACE,YAAD,CAAzB;EACA,IAAIE,KAAJ;EACA,IAAIC,cAAc,GAAGL,UAAU,CAAC,EAAD,CAA/B;;EAEA,SAASM,aAAT,CAAuBC,OAAvB,EAAgC;IAC9BF,cAAc,CAACG,KAAf,CAAqBC,IAArB,CAA0BF,OAA1B;IACAV,GAAG,CAACa,MAAJ,CAAWN,KAAX;IACAA,KAAK,GAAGP,GAAG,CAAC,YAAY;MACtB,IAAIc,SAAS,GAAGN,cAAc,CAACG,KAA/B,CADsB,CACgB;;MAEtCH,cAAc,CAACG,KAAf,GAAuB,EAAvB;MACAG,SAAS,CAACC,OAAV,CAAkB,UAAUC,YAAV,EAAwB;QACxCV,QAAQ,CAACK,KAAT,GAAiBK,YAAY,CAACV,QAAQ,CAACK,KAAV,CAA7B;MACD,CAFD;IAGD,CAPU,CAAX;EAQD;;EAEDV,eAAe,CAAC,YAAY;IAC1BD,GAAG,CAACa,MAAJ,CAAWN,KAAX;EACD,CAFc,CAAf;EAGA,OAAO,CAACD,QAAD,EAAWG,aAAX,CAAP;AACD;AACD;;AAEA,OAAO,SAASQ,cAAT,CAAwBZ,YAAxB,EAAsC;EAC3C,IAAIa,QAAQ,GAAGhB,GAAG,CAACG,YAAY,IAAI,IAAjB,CAAlB;EACA,IAAIc,UAAU,GAAGjB,GAAG,EAApB;;EAEA,SAASkB,OAAT,GAAmB;IACjBC,YAAY,CAACF,UAAU,CAACR,KAAZ,CAAZ;EACD;;EAED,SAASW,QAAT,CAAkBC,QAAlB,EAA4B;IAC1BL,QAAQ,CAACP,KAAT,GAAiBY,QAAjB;IACAH,OAAO;IACPD,UAAU,CAACR,KAAX,GAAmBa,UAAU,CAAC,YAAY;MACxCN,QAAQ,CAACP,KAAT,GAAiB,IAAjB;MACAQ,UAAU,CAACR,KAAX,GAAmBc,SAAnB;IACD,CAH4B,EAG1B,GAH0B,CAA7B;EAID;;EAED,SAASC,QAAT,GAAoB;IAClB,OAAOR,QAAQ,CAACP,KAAhB;EACD;;EAEDV,eAAe,CAAC,YAAY;IAC1BmB,OAAO;EACR,CAFc,CAAf;EAGA,OAAO,CAACE,QAAD,EAAWI,QAAX,CAAP;AACD"},"metadata":{},"sourceType":"module"}