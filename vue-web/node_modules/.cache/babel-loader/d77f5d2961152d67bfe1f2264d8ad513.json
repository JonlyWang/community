{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\nimport { onMounted, ref, defineComponent, onBeforeUnmount } from 'vue';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonTypes';\nimport useDestroyed from './hooks/useDestroyed';\nvar actionButtonProps = {\n  type: {\n    type: String\n  },\n  actionFn: Function,\n  close: Function,\n  autofocus: Boolean,\n  prefixCls: String,\n  buttonProps: Object,\n  emitEvent: Boolean,\n  quitOnNullishReturnValue: Boolean\n};\n\nfunction isThenable(thing) {\n  return !!(thing && !!thing.then);\n}\n\nexport default defineComponent({\n  name: 'ActionButton',\n  props: actionButtonProps,\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var clickedRef = ref(false);\n    var buttonRef = ref();\n    var loading = ref(false);\n    var timeoutId;\n    var isDestroyed = useDestroyed();\n    onMounted(function () {\n      if (props.autofocus) {\n        timeoutId = setTimeout(function () {\n          var _a;\n\n          return (_a = buttonRef.value.$el) === null || _a === void 0 ? void 0 : _a.focus();\n        });\n      }\n    });\n    onBeforeUnmount(function () {\n      clearTimeout(timeoutId);\n    });\n\n    var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n      var close = props.close;\n\n      if (!isThenable(returnValueOfOnOk)) {\n        return;\n      }\n\n      loading.value = true;\n      returnValueOfOnOk.then(function () {\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n\n        close.apply(void 0, arguments);\n        clickedRef.value = false;\n      }, function (e) {\n        // Emit error when catch promise reject\n        // eslint-disable-next-line no-console\n        console.error(e); // See: https://github.com/ant-design/ant-design/issues/6183\n\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n\n        clickedRef.value = false;\n      });\n    };\n\n    var onClick = function onClick(e) {\n      var actionFn = props.actionFn,\n          _props$close = props.close,\n          close = _props$close === void 0 ? function () {} : _props$close;\n\n      if (clickedRef.value) {\n        return;\n      }\n\n      clickedRef.value = true;\n\n      if (!actionFn) {\n        close();\n        return;\n      }\n\n      var returnValueOfOnOk;\n\n      if (props.emitEvent) {\n        returnValueOfOnOk = actionFn(e);\n\n        if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n          clickedRef.value = false;\n          close(e);\n          return;\n        }\n      } else if (actionFn.length) {\n        returnValueOfOnOk = actionFn(close); // https://github.com/ant-design/ant-design/issues/23358\n\n        clickedRef.value = false;\n      } else {\n        returnValueOfOnOk = actionFn();\n\n        if (!returnValueOfOnOk) {\n          close();\n          return;\n        }\n      }\n\n      handlePromiseOnOk(returnValueOfOnOk);\n    };\n\n    return function () {\n      var type = props.type,\n          prefixCls = props.prefixCls,\n          buttonProps = props.buttonProps;\n      return _createVNode(Button, _objectSpread(_objectSpread(_objectSpread({}, convertLegacyProps(type)), {}, {\n        \"onClick\": onClick,\n        \"loading\": loading.value,\n        \"prefixCls\": prefixCls\n      }, buttonProps), {}, {\n        \"ref\": buttonRef\n      }), slots);\n    };\n  }\n});","map":{"version":3,"names":["_objectSpread","createVNode","_createVNode","resolveDirective","_resolveDirective","onMounted","ref","defineComponent","onBeforeUnmount","Button","convertLegacyProps","useDestroyed","actionButtonProps","type","String","actionFn","Function","close","autofocus","Boolean","prefixCls","buttonProps","Object","emitEvent","quitOnNullishReturnValue","isThenable","thing","then","name","props","setup","_ref","slots","clickedRef","buttonRef","loading","timeoutId","isDestroyed","setTimeout","_a","value","$el","focus","clearTimeout","handlePromiseOnOk","returnValueOfOnOk","apply","arguments","e","console","error","onClick","_props$close","length"],"sources":["C:/Users/USTC/Desktop/community1/vue-web/node_modules/ant-design-vue/es/_util/ActionButton.js"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport { createVNode as _createVNode, resolveDirective as _resolveDirective } from \"vue\";\nimport { onMounted, ref, defineComponent, onBeforeUnmount } from 'vue';\nimport Button from '../button';\nimport { convertLegacyProps } from '../button/buttonTypes';\nimport useDestroyed from './hooks/useDestroyed';\nvar actionButtonProps = {\n  type: {\n    type: String\n  },\n  actionFn: Function,\n  close: Function,\n  autofocus: Boolean,\n  prefixCls: String,\n  buttonProps: Object,\n  emitEvent: Boolean,\n  quitOnNullishReturnValue: Boolean\n};\n\nfunction isThenable(thing) {\n  return !!(thing && !!thing.then);\n}\n\nexport default defineComponent({\n  name: 'ActionButton',\n  props: actionButtonProps,\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n    var clickedRef = ref(false);\n    var buttonRef = ref();\n    var loading = ref(false);\n    var timeoutId;\n    var isDestroyed = useDestroyed();\n    onMounted(function () {\n      if (props.autofocus) {\n        timeoutId = setTimeout(function () {\n          var _a;\n\n          return (_a = buttonRef.value.$el) === null || _a === void 0 ? void 0 : _a.focus();\n        });\n      }\n    });\n    onBeforeUnmount(function () {\n      clearTimeout(timeoutId);\n    });\n\n    var handlePromiseOnOk = function handlePromiseOnOk(returnValueOfOnOk) {\n      var close = props.close;\n\n      if (!isThenable(returnValueOfOnOk)) {\n        return;\n      }\n\n      loading.value = true;\n      returnValueOfOnOk.then(function () {\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n\n        close.apply(void 0, arguments);\n        clickedRef.value = false;\n      }, function (e) {\n        // Emit error when catch promise reject\n        // eslint-disable-next-line no-console\n        console.error(e); // See: https://github.com/ant-design/ant-design/issues/6183\n\n        if (!isDestroyed.value) {\n          loading.value = false;\n        }\n\n        clickedRef.value = false;\n      });\n    };\n\n    var onClick = function onClick(e) {\n      var actionFn = props.actionFn,\n          _props$close = props.close,\n          close = _props$close === void 0 ? function () {} : _props$close;\n\n      if (clickedRef.value) {\n        return;\n      }\n\n      clickedRef.value = true;\n\n      if (!actionFn) {\n        close();\n        return;\n      }\n\n      var returnValueOfOnOk;\n\n      if (props.emitEvent) {\n        returnValueOfOnOk = actionFn(e);\n\n        if (props.quitOnNullishReturnValue && !isThenable(returnValueOfOnOk)) {\n          clickedRef.value = false;\n          close(e);\n          return;\n        }\n      } else if (actionFn.length) {\n        returnValueOfOnOk = actionFn(close); // https://github.com/ant-design/ant-design/issues/23358\n\n        clickedRef.value = false;\n      } else {\n        returnValueOfOnOk = actionFn();\n\n        if (!returnValueOfOnOk) {\n          close();\n          return;\n        }\n      }\n\n      handlePromiseOnOk(returnValueOfOnOk);\n    };\n\n    return function () {\n      var type = props.type,\n          prefixCls = props.prefixCls,\n          buttonProps = props.buttonProps;\n      return _createVNode(Button, _objectSpread(_objectSpread(_objectSpread({}, convertLegacyProps(type)), {}, {\n        \"onClick\": onClick,\n        \"loading\": loading.value,\n        \"prefixCls\": prefixCls\n      }, buttonProps), {}, {\n        \"ref\": buttonRef\n      }), slots);\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}