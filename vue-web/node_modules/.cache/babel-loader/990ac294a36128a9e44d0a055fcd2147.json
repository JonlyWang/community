{"ast":null,"code":"import { createVNode as _createVNode } from \"vue\";\nimport Menu, { Item as MenuItem } from '../../menu';\nimport { onBeforeUnmount, defineComponent, inject, ref } from 'vue';\nimport MentionsContextKey from './MentionsContext';\nimport Spin from '../../spin';\n\nfunction noop() {}\n\nexport default defineComponent({\n  name: 'DropdownMenu',\n  props: {\n    prefixCls: String,\n    options: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  slots: ['notFoundContent', 'option'],\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n\n    var _inject = inject(MentionsContextKey, {\n      activeIndex: ref(),\n      loading: ref(false)\n    }),\n        activeIndex = _inject.activeIndex,\n        setActiveIndex = _inject.setActiveIndex,\n        selectOption = _inject.selectOption,\n        _inject$onFocus = _inject.onFocus,\n        onFocus = _inject$onFocus === void 0 ? noop : _inject$onFocus,\n        loading = _inject.loading;\n\n    var timeoutId;\n\n    var onMousedown = function onMousedown(e) {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(function () {\n        onFocus(e);\n      });\n    };\n\n    onBeforeUnmount(function () {\n      clearTimeout(timeoutId);\n    });\n    return function () {\n      var _a;\n\n      var prefixCls = props.prefixCls,\n          options = props.options;\n      var activeOption = options[activeIndex.value] || {};\n      return _createVNode(Menu, {\n        \"prefixCls\": \"\".concat(prefixCls, \"-menu\"),\n        \"activeKey\": activeOption.value,\n        \"onSelect\": function onSelect(_ref2) {\n          var key = _ref2.key;\n          var option = options.find(function (_ref3) {\n            var value = _ref3.value;\n            return value === key;\n          });\n          selectOption(option);\n        },\n        \"onMousedown\": onMousedown\n      }, {\n        default: function _default() {\n          return [!loading.value && options.map(function (option, index) {\n            var _a, _b;\n\n            var value = option.value,\n                disabled = option.disabled,\n                _option$label = option.label,\n                label = _option$label === void 0 ? option.value : _option$label;\n            return _createVNode(MenuItem, {\n              \"key\": value,\n              \"disabled\": disabled,\n              \"onMouseenter\": function onMouseenter() {\n                setActiveIndex(index);\n              }\n            }, {\n              default: function _default() {\n                return [(_b = (_a = slots.option) === null || _a === void 0 ? void 0 : _a.call(slots, option)) !== null && _b !== void 0 ? _b : typeof label === 'function' ? label({\n                  value: value,\n                  disabled: disabled\n                }) : label];\n              }\n            });\n          }), !loading.value && options.length === 0 ? _createVNode(MenuItem, {\n            \"key\": \"notFoundContent\",\n            \"disabled\": true\n          }, {\n            default: function _default() {\n              return [(_a = slots.notFoundContent) === null || _a === void 0 ? void 0 : _a.call(slots)];\n            }\n          }) : null, loading.value && _createVNode(MenuItem, {\n            \"key\": \"loading\",\n            \"disabled\": true\n          }, {\n            default: function _default() {\n              return [_createVNode(Spin, {\n                \"size\": \"small\"\n              }, null)];\n            }\n          })];\n        }\n      });\n    };\n  }\n});","map":{"version":3,"names":["createVNode","_createVNode","Menu","Item","MenuItem","onBeforeUnmount","defineComponent","inject","ref","MentionsContextKey","Spin","noop","name","props","prefixCls","String","options","type","Array","default","_default","slots","setup","_ref","_inject","activeIndex","loading","setActiveIndex","selectOption","_inject$onFocus","onFocus","timeoutId","onMousedown","e","clearTimeout","setTimeout","_a","activeOption","value","concat","onSelect","_ref2","key","option","find","_ref3","map","index","_b","disabled","_option$label","label","onMouseenter","call","length","notFoundContent"],"sources":["/home/ubuntu/voting/vue-web/node_modules/ant-design-vue/es/vc-mentions/src/DropdownMenu.js"],"sourcesContent":["import { createVNode as _createVNode } from \"vue\";\nimport Menu, { Item as MenuItem } from '../../menu';\nimport { onBeforeUnmount, defineComponent, inject, ref } from 'vue';\nimport MentionsContextKey from './MentionsContext';\nimport Spin from '../../spin';\n\nfunction noop() {}\n\nexport default defineComponent({\n  name: 'DropdownMenu',\n  props: {\n    prefixCls: String,\n    options: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  slots: ['notFoundContent', 'option'],\n  setup: function setup(props, _ref) {\n    var slots = _ref.slots;\n\n    var _inject = inject(MentionsContextKey, {\n      activeIndex: ref(),\n      loading: ref(false)\n    }),\n        activeIndex = _inject.activeIndex,\n        setActiveIndex = _inject.setActiveIndex,\n        selectOption = _inject.selectOption,\n        _inject$onFocus = _inject.onFocus,\n        onFocus = _inject$onFocus === void 0 ? noop : _inject$onFocus,\n        loading = _inject.loading;\n\n    var timeoutId;\n\n    var onMousedown = function onMousedown(e) {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(function () {\n        onFocus(e);\n      });\n    };\n\n    onBeforeUnmount(function () {\n      clearTimeout(timeoutId);\n    });\n    return function () {\n      var _a;\n\n      var prefixCls = props.prefixCls,\n          options = props.options;\n      var activeOption = options[activeIndex.value] || {};\n      return _createVNode(Menu, {\n        \"prefixCls\": \"\".concat(prefixCls, \"-menu\"),\n        \"activeKey\": activeOption.value,\n        \"onSelect\": function onSelect(_ref2) {\n          var key = _ref2.key;\n          var option = options.find(function (_ref3) {\n            var value = _ref3.value;\n            return value === key;\n          });\n          selectOption(option);\n        },\n        \"onMousedown\": onMousedown\n      }, {\n        default: function _default() {\n          return [!loading.value && options.map(function (option, index) {\n            var _a, _b;\n\n            var value = option.value,\n                disabled = option.disabled,\n                _option$label = option.label,\n                label = _option$label === void 0 ? option.value : _option$label;\n            return _createVNode(MenuItem, {\n              \"key\": value,\n              \"disabled\": disabled,\n              \"onMouseenter\": function onMouseenter() {\n                setActiveIndex(index);\n              }\n            }, {\n              default: function _default() {\n                return [(_b = (_a = slots.option) === null || _a === void 0 ? void 0 : _a.call(slots, option)) !== null && _b !== void 0 ? _b : typeof label === 'function' ? label({\n                  value: value,\n                  disabled: disabled\n                }) : label];\n              }\n            });\n          }), !loading.value && options.length === 0 ? _createVNode(MenuItem, {\n            \"key\": \"notFoundContent\",\n            \"disabled\": true\n          }, {\n            default: function _default() {\n              return [(_a = slots.notFoundContent) === null || _a === void 0 ? void 0 : _a.call(slots)];\n            }\n          }) : null, loading.value && _createVNode(MenuItem, {\n            \"key\": \"loading\",\n            \"disabled\": true\n          }, {\n            default: function _default() {\n              return [_createVNode(Spin, {\n                \"size\": \"small\"\n              }, null)];\n            }\n          })];\n        }\n      });\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}