{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { nextTick, defineComponent, ref, computed, onMounted, onUpdated, watch, onUnmounted } from 'vue';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { cloneElement } from '../_util/vnode';\nimport isVisible from '../vc-util/Dom/isVisible';\nimport { isSamePoint, restoreFocus, monitorResize } from './util';\nimport useBuffer from './hooks/useBuffer';\nimport isEqual from 'lodash-es/isEqual';\nexport var alignProps = {\n  align: Object,\n  target: [Object, Function],\n  onAlign: Function,\n  monitorBufferTime: Number,\n  monitorWindowResize: Boolean,\n  disabled: Boolean\n};\n\nfunction getElement(func) {\n  if (typeof func !== 'function') return null;\n  return func();\n}\n\nfunction getPoint(point) {\n  if (_typeof(point) !== 'object' || !point) return null;\n  return point;\n}\n\nexport default defineComponent({\n  name: 'Align',\n  props: alignProps,\n  emits: ['align'],\n  setup: function setup(props, _ref) {\n    var expose = _ref.expose,\n        slots = _ref.slots;\n    var cacheRef = ref({});\n    var nodeRef = ref();\n\n    var _useBuffer = useBuffer(function () {\n      var latestDisabled = props.disabled,\n          latestTarget = props.target,\n          latestAlign = props.align,\n          latestOnAlign = props.onAlign;\n\n      if (!latestDisabled && latestTarget && nodeRef.value) {\n        var source = nodeRef.value;\n        var result;\n        var element = getElement(latestTarget);\n        var point = getPoint(latestTarget);\n        cacheRef.value.element = element;\n        cacheRef.value.point = point;\n        cacheRef.value.align = latestAlign; // IE lose focus after element realign\n        // We should record activeElement and restore later\n\n        var _document = document,\n            activeElement = _document.activeElement; // We only align when element is visible\n\n        if (element && isVisible(element)) {\n          result = alignElement(source, element, latestAlign);\n        } else if (point) {\n          result = alignPoint(source, point, latestAlign);\n        }\n\n        restoreFocus(activeElement, source);\n\n        if (latestOnAlign && result) {\n          latestOnAlign(source, result);\n        }\n\n        return true;\n      }\n\n      return false;\n    }, computed(function () {\n      return props.monitorBufferTime;\n    })),\n        _useBuffer2 = _slicedToArray(_useBuffer, 2),\n        _forceAlign = _useBuffer2[0],\n        cancelForceAlign = _useBuffer2[1]; // ===================== Effect =====================\n    // Listen for target updated\n\n\n    var resizeMonitor = ref({\n      cancel: function cancel() {}\n    }); // Listen for source updated\n\n    var sourceResizeMonitor = ref({\n      cancel: function cancel() {}\n    });\n\n    var goAlign = function goAlign() {\n      var target = props.target;\n      var element = getElement(target);\n      var point = getPoint(target);\n\n      if (nodeRef.value !== sourceResizeMonitor.value.element) {\n        sourceResizeMonitor.value.cancel();\n        sourceResizeMonitor.value.element = nodeRef.value;\n        sourceResizeMonitor.value.cancel = monitorResize(nodeRef.value, _forceAlign);\n      }\n\n      if (cacheRef.value.element !== element || !isSamePoint(cacheRef.value.point, point) || !isEqual(cacheRef.value.align, props.align)) {\n        _forceAlign(); // Add resize observer\n\n\n        if (resizeMonitor.value.element !== element) {\n          resizeMonitor.value.cancel();\n          resizeMonitor.value.element = element;\n          resizeMonitor.value.cancel = monitorResize(element, _forceAlign);\n        }\n      }\n    };\n\n    onMounted(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    });\n    onUpdated(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    }); // Listen for disabled change\n\n    watch(function () {\n      return props.disabled;\n    }, function (disabled) {\n      if (!disabled) {\n        _forceAlign();\n      } else {\n        cancelForceAlign();\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    }); // Listen for window resize\n\n    var winResizeRef = ref(null);\n    watch(function () {\n      return props.monitorWindowResize;\n    }, function (monitorWindowResize) {\n      if (monitorWindowResize) {\n        if (!winResizeRef.value) {\n          winResizeRef.value = addEventListener(window, 'resize', _forceAlign);\n        }\n      } else if (winResizeRef.value) {\n        winResizeRef.value.remove();\n        winResizeRef.value = null;\n      }\n    }, {\n      flush: 'post'\n    });\n    onUnmounted(function () {\n      resizeMonitor.value.cancel();\n      sourceResizeMonitor.value.cancel();\n      if (winResizeRef.value) winResizeRef.value.remove();\n      cancelForceAlign();\n    });\n    expose({\n      forceAlign: function forceAlign() {\n        return _forceAlign(true);\n      }\n    });\n    return function () {\n      var child = slots === null || slots === void 0 ? void 0 : slots.default();\n\n      if (child) {\n        return cloneElement(child[0], {\n          ref: nodeRef\n        }, true, true);\n      }\n\n      return null;\n    };\n  }\n});","map":{"version":3,"names":["_slicedToArray","_typeof","nextTick","defineComponent","ref","computed","onMounted","onUpdated","watch","onUnmounted","alignElement","alignPoint","addEventListener","cloneElement","isVisible","isSamePoint","restoreFocus","monitorResize","useBuffer","isEqual","alignProps","align","Object","target","Function","onAlign","monitorBufferTime","Number","monitorWindowResize","Boolean","disabled","getElement","func","getPoint","point","name","props","emits","setup","_ref","expose","slots","cacheRef","nodeRef","_useBuffer","latestDisabled","latestTarget","latestAlign","latestOnAlign","value","source","result","element","_document","document","activeElement","_useBuffer2","_forceAlign","cancelForceAlign","resizeMonitor","cancel","sourceResizeMonitor","goAlign","immediate","flush","winResizeRef","window","remove","forceAlign","child","default"],"sources":["C:/Users/USTC/Desktop/community1/vue-web/node_modules/ant-design-vue/es/vc-align/Align.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport { nextTick, defineComponent, ref, computed, onMounted, onUpdated, watch, onUnmounted } from 'vue';\nimport { alignElement, alignPoint } from 'dom-align';\nimport addEventListener from '../vc-util/Dom/addEventListener';\nimport { cloneElement } from '../_util/vnode';\nimport isVisible from '../vc-util/Dom/isVisible';\nimport { isSamePoint, restoreFocus, monitorResize } from './util';\nimport useBuffer from './hooks/useBuffer';\nimport isEqual from 'lodash-es/isEqual';\nexport var alignProps = {\n  align: Object,\n  target: [Object, Function],\n  onAlign: Function,\n  monitorBufferTime: Number,\n  monitorWindowResize: Boolean,\n  disabled: Boolean\n};\n\nfunction getElement(func) {\n  if (typeof func !== 'function') return null;\n  return func();\n}\n\nfunction getPoint(point) {\n  if (_typeof(point) !== 'object' || !point) return null;\n  return point;\n}\n\nexport default defineComponent({\n  name: 'Align',\n  props: alignProps,\n  emits: ['align'],\n  setup: function setup(props, _ref) {\n    var expose = _ref.expose,\n        slots = _ref.slots;\n    var cacheRef = ref({});\n    var nodeRef = ref();\n\n    var _useBuffer = useBuffer(function () {\n      var latestDisabled = props.disabled,\n          latestTarget = props.target,\n          latestAlign = props.align,\n          latestOnAlign = props.onAlign;\n\n      if (!latestDisabled && latestTarget && nodeRef.value) {\n        var source = nodeRef.value;\n        var result;\n        var element = getElement(latestTarget);\n        var point = getPoint(latestTarget);\n        cacheRef.value.element = element;\n        cacheRef.value.point = point;\n        cacheRef.value.align = latestAlign; // IE lose focus after element realign\n        // We should record activeElement and restore later\n\n        var _document = document,\n            activeElement = _document.activeElement; // We only align when element is visible\n\n        if (element && isVisible(element)) {\n          result = alignElement(source, element, latestAlign);\n        } else if (point) {\n          result = alignPoint(source, point, latestAlign);\n        }\n\n        restoreFocus(activeElement, source);\n\n        if (latestOnAlign && result) {\n          latestOnAlign(source, result);\n        }\n\n        return true;\n      }\n\n      return false;\n    }, computed(function () {\n      return props.monitorBufferTime;\n    })),\n        _useBuffer2 = _slicedToArray(_useBuffer, 2),\n        _forceAlign = _useBuffer2[0],\n        cancelForceAlign = _useBuffer2[1]; // ===================== Effect =====================\n    // Listen for target updated\n\n\n    var resizeMonitor = ref({\n      cancel: function cancel() {}\n    }); // Listen for source updated\n\n    var sourceResizeMonitor = ref({\n      cancel: function cancel() {}\n    });\n\n    var goAlign = function goAlign() {\n      var target = props.target;\n      var element = getElement(target);\n      var point = getPoint(target);\n\n      if (nodeRef.value !== sourceResizeMonitor.value.element) {\n        sourceResizeMonitor.value.cancel();\n        sourceResizeMonitor.value.element = nodeRef.value;\n        sourceResizeMonitor.value.cancel = monitorResize(nodeRef.value, _forceAlign);\n      }\n\n      if (cacheRef.value.element !== element || !isSamePoint(cacheRef.value.point, point) || !isEqual(cacheRef.value.align, props.align)) {\n        _forceAlign(); // Add resize observer\n\n\n        if (resizeMonitor.value.element !== element) {\n          resizeMonitor.value.cancel();\n          resizeMonitor.value.element = element;\n          resizeMonitor.value.cancel = monitorResize(element, _forceAlign);\n        }\n      }\n    };\n\n    onMounted(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    });\n    onUpdated(function () {\n      nextTick(function () {\n        goAlign();\n      });\n    }); // Listen for disabled change\n\n    watch(function () {\n      return props.disabled;\n    }, function (disabled) {\n      if (!disabled) {\n        _forceAlign();\n      } else {\n        cancelForceAlign();\n      }\n    }, {\n      immediate: true,\n      flush: 'post'\n    }); // Listen for window resize\n\n    var winResizeRef = ref(null);\n    watch(function () {\n      return props.monitorWindowResize;\n    }, function (monitorWindowResize) {\n      if (monitorWindowResize) {\n        if (!winResizeRef.value) {\n          winResizeRef.value = addEventListener(window, 'resize', _forceAlign);\n        }\n      } else if (winResizeRef.value) {\n        winResizeRef.value.remove();\n        winResizeRef.value = null;\n      }\n    }, {\n      flush: 'post'\n    });\n    onUnmounted(function () {\n      resizeMonitor.value.cancel();\n      sourceResizeMonitor.value.cancel();\n      if (winResizeRef.value) winResizeRef.value.remove();\n      cancelForceAlign();\n    });\n    expose({\n      forceAlign: function forceAlign() {\n        return _forceAlign(true);\n      }\n    });\n    return function () {\n      var child = slots === null || slots === void 0 ? void 0 : slots.default();\n\n      if (child) {\n        return cloneElement(child[0], {\n          ref: nodeRef\n        }, true, true);\n      }\n\n      return null;\n    };\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}