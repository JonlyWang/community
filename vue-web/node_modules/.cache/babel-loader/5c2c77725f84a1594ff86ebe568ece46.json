{"ast":null,"code":"import addEventListener from '../vc-util/Dom/addEventListener';\nimport supportsPassive from '../_util/supportsPassive';\nexport function getTargetRect(target) {\n  return target !== window ? target.getBoundingClientRect() : {\n    top: 0,\n    bottom: window.innerHeight\n  };\n}\nexport function getFixedTop(placeholderReact, targetRect, offsetTop) {\n  if (offsetTop !== undefined && targetRect.top > placeholderReact.top - offsetTop) {\n    return \"\".concat(offsetTop + targetRect.top, \"px\");\n  }\n\n  return undefined;\n}\nexport function getFixedBottom(placeholderReact, targetRect, offsetBottom) {\n  if (offsetBottom !== undefined && targetRect.bottom < placeholderReact.bottom + offsetBottom) {\n    var targetBottomOffset = window.innerHeight - targetRect.bottom;\n    return \"\".concat(offsetBottom + targetBottomOffset, \"px\");\n  }\n\n  return undefined;\n} // ======================== Observer ========================\n\nvar TRIGGER_EVENTS = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\nvar observerEntities = [];\nexport function getObserverEntities() {\n  // Only used in test env. Can be removed if refactor.\n  return observerEntities;\n}\nexport function addObserveTarget(target, affix) {\n  if (!target) return;\n  var entity = observerEntities.find(function (item) {\n    return item.target === target;\n  });\n\n  if (entity) {\n    entity.affixList.push(affix);\n  } else {\n    entity = {\n      target: target,\n      affixList: [affix],\n      eventHandlers: {}\n    };\n    observerEntities.push(entity); // Add listener\n\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      entity.eventHandlers[eventName] = addEventListener(target, eventName, function () {\n        entity.affixList.forEach(function (targetAffix) {\n          var lazyUpdatePosition = targetAffix.exposed.lazyUpdatePosition;\n          lazyUpdatePosition();\n        }, (eventName === 'touchstart' || eventName === 'touchmove') && supportsPassive ? {\n          passive: true\n        } : false);\n      });\n    });\n  }\n}\nexport function removeObserveTarget(affix) {\n  var observerEntity = observerEntities.find(function (oriObserverEntity) {\n    var hasAffix = oriObserverEntity.affixList.some(function (item) {\n      return item === affix;\n    });\n\n    if (hasAffix) {\n      oriObserverEntity.affixList = oriObserverEntity.affixList.filter(function (item) {\n        return item !== affix;\n      });\n    }\n\n    return hasAffix;\n  });\n\n  if (observerEntity && observerEntity.affixList.length === 0) {\n    observerEntities = observerEntities.filter(function (item) {\n      return item !== observerEntity;\n    }); // Remove listener\n\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      var handler = observerEntity.eventHandlers[eventName];\n\n      if (handler && handler.remove) {\n        handler.remove();\n      }\n    });\n  }\n}","map":{"version":3,"names":["addEventListener","supportsPassive","getTargetRect","target","window","getBoundingClientRect","top","bottom","innerHeight","getFixedTop","placeholderReact","targetRect","offsetTop","undefined","concat","getFixedBottom","offsetBottom","targetBottomOffset","TRIGGER_EVENTS","observerEntities","getObserverEntities","addObserveTarget","affix","entity","find","item","affixList","push","eventHandlers","forEach","eventName","targetAffix","lazyUpdatePosition","exposed","passive","removeObserveTarget","observerEntity","oriObserverEntity","hasAffix","some","filter","length","handler","remove"],"sources":["C:/Users/USTC/Desktop/community1/vue-web/node_modules/ant-design-vue/es/affix/utils.js"],"sourcesContent":["import addEventListener from '../vc-util/Dom/addEventListener';\nimport supportsPassive from '../_util/supportsPassive';\nexport function getTargetRect(target) {\n  return target !== window ? target.getBoundingClientRect() : {\n    top: 0,\n    bottom: window.innerHeight\n  };\n}\nexport function getFixedTop(placeholderReact, targetRect, offsetTop) {\n  if (offsetTop !== undefined && targetRect.top > placeholderReact.top - offsetTop) {\n    return \"\".concat(offsetTop + targetRect.top, \"px\");\n  }\n\n  return undefined;\n}\nexport function getFixedBottom(placeholderReact, targetRect, offsetBottom) {\n  if (offsetBottom !== undefined && targetRect.bottom < placeholderReact.bottom + offsetBottom) {\n    var targetBottomOffset = window.innerHeight - targetRect.bottom;\n    return \"\".concat(offsetBottom + targetBottomOffset, \"px\");\n  }\n\n  return undefined;\n} // ======================== Observer ========================\n\nvar TRIGGER_EVENTS = ['resize', 'scroll', 'touchstart', 'touchmove', 'touchend', 'pageshow', 'load'];\nvar observerEntities = [];\nexport function getObserverEntities() {\n  // Only used in test env. Can be removed if refactor.\n  return observerEntities;\n}\nexport function addObserveTarget(target, affix) {\n  if (!target) return;\n  var entity = observerEntities.find(function (item) {\n    return item.target === target;\n  });\n\n  if (entity) {\n    entity.affixList.push(affix);\n  } else {\n    entity = {\n      target: target,\n      affixList: [affix],\n      eventHandlers: {}\n    };\n    observerEntities.push(entity); // Add listener\n\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      entity.eventHandlers[eventName] = addEventListener(target, eventName, function () {\n        entity.affixList.forEach(function (targetAffix) {\n          var lazyUpdatePosition = targetAffix.exposed.lazyUpdatePosition;\n          lazyUpdatePosition();\n        }, (eventName === 'touchstart' || eventName === 'touchmove') && supportsPassive ? {\n          passive: true\n        } : false);\n      });\n    });\n  }\n}\nexport function removeObserveTarget(affix) {\n  var observerEntity = observerEntities.find(function (oriObserverEntity) {\n    var hasAffix = oriObserverEntity.affixList.some(function (item) {\n      return item === affix;\n    });\n\n    if (hasAffix) {\n      oriObserverEntity.affixList = oriObserverEntity.affixList.filter(function (item) {\n        return item !== affix;\n      });\n    }\n\n    return hasAffix;\n  });\n\n  if (observerEntity && observerEntity.affixList.length === 0) {\n    observerEntities = observerEntities.filter(function (item) {\n      return item !== observerEntity;\n    }); // Remove listener\n\n    TRIGGER_EVENTS.forEach(function (eventName) {\n      var handler = observerEntity.eventHandlers[eventName];\n\n      if (handler && handler.remove) {\n        handler.remove();\n      }\n    });\n  }\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}