{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { computed } from 'vue';\nexport var SEARCH_MARK = '__rc_cascader_search_mark__';\n\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\n\nvar defaultRender = function defaultRender(_ref2) {\n  var path = _ref2.path,\n      fieldNames = _ref2.fieldNames;\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\n\nexport default (function (search, options, fieldNames, prefixCls, config, changeOnSelect) {\n  return computed(function () {\n    var _config$value = config.value,\n        _config$value$filter = _config$value.filter,\n        filter = _config$value$filter === void 0 ? defaultFilter : _config$value$filter,\n        _config$value$render = _config$value.render,\n        render = _config$value$render === void 0 ? defaultRender : _config$value$render,\n        _config$value$limit = _config$value.limit,\n        limit = _config$value$limit === void 0 ? 50 : _config$value$limit,\n        sort = _config$value.sort;\n    var filteredOptions = [];\n\n    if (!search.value) {\n      return [];\n    }\n\n    function dig(list, pathOptions) {\n      list.forEach(function (option) {\n        // Perf saving when `sort` is disabled and `limit` is provided\n        if (!sort && limit > 0 && filteredOptions.length >= limit) {\n          return;\n        }\n\n        var connectedPathOptions = [].concat(_toConsumableArray(pathOptions), [option]);\n        var children = option[fieldNames.value.children]; // If current option is filterable\n\n        if ( // If is leaf option\n        !children || children.length === 0 || // If is changeOnSelect\n        changeOnSelect.value) {\n          if (filter(search.value, connectedPathOptions, {\n            label: fieldNames.value.label\n          })) {\n            var _extends2;\n\n            filteredOptions.push(_extends(_extends({}, option), (_extends2 = {}, _defineProperty(_extends2, fieldNames.value.label, render({\n              inputValue: search.value,\n              path: connectedPathOptions,\n              prefixCls: prefixCls.value,\n              fieldNames: fieldNames.value\n            })), _defineProperty(_extends2, SEARCH_MARK, connectedPathOptions), _extends2)));\n          }\n        }\n\n        if (children) {\n          dig(option[fieldNames.value.children], connectedPathOptions);\n        }\n      });\n    }\n\n    dig(options.value, []); // Do sort\n\n    if (sort) {\n      filteredOptions.sort(function (a, b) {\n        return sort(a[SEARCH_MARK], b[SEARCH_MARK], search.value, fieldNames.value);\n      });\n    }\n\n    return limit > 0 ? filteredOptions.slice(0, limit) : filteredOptions;\n  });\n});","map":{"version":3,"names":["_defineProperty","_extends","_toConsumableArray","computed","SEARCH_MARK","defaultFilter","search","options","_ref","label","some","opt","String","toLowerCase","includes","defaultRender","_ref2","path","fieldNames","map","join","prefixCls","config","changeOnSelect","_config$value","value","_config$value$filter","filter","_config$value$render","render","_config$value$limit","limit","sort","filteredOptions","dig","list","pathOptions","forEach","option","length","connectedPathOptions","concat","children","_extends2","push","inputValue","a","b","slice"],"sources":["C:/Users/USTC/Desktop/community1/vue-web/node_modules/ant-design-vue/es/vc-cascader/hooks/useSearchOptions.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport { computed } from 'vue';\nexport var SEARCH_MARK = '__rc_cascader_search_mark__';\n\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\n\nvar defaultRender = function defaultRender(_ref2) {\n  var path = _ref2.path,\n      fieldNames = _ref2.fieldNames;\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\n\nexport default (function (search, options, fieldNames, prefixCls, config, changeOnSelect) {\n  return computed(function () {\n    var _config$value = config.value,\n        _config$value$filter = _config$value.filter,\n        filter = _config$value$filter === void 0 ? defaultFilter : _config$value$filter,\n        _config$value$render = _config$value.render,\n        render = _config$value$render === void 0 ? defaultRender : _config$value$render,\n        _config$value$limit = _config$value.limit,\n        limit = _config$value$limit === void 0 ? 50 : _config$value$limit,\n        sort = _config$value.sort;\n    var filteredOptions = [];\n\n    if (!search.value) {\n      return [];\n    }\n\n    function dig(list, pathOptions) {\n      list.forEach(function (option) {\n        // Perf saving when `sort` is disabled and `limit` is provided\n        if (!sort && limit > 0 && filteredOptions.length >= limit) {\n          return;\n        }\n\n        var connectedPathOptions = [].concat(_toConsumableArray(pathOptions), [option]);\n        var children = option[fieldNames.value.children]; // If current option is filterable\n\n        if ( // If is leaf option\n        !children || children.length === 0 || // If is changeOnSelect\n        changeOnSelect.value) {\n          if (filter(search.value, connectedPathOptions, {\n            label: fieldNames.value.label\n          })) {\n            var _extends2;\n\n            filteredOptions.push(_extends(_extends({}, option), (_extends2 = {}, _defineProperty(_extends2, fieldNames.value.label, render({\n              inputValue: search.value,\n              path: connectedPathOptions,\n              prefixCls: prefixCls.value,\n              fieldNames: fieldNames.value\n            })), _defineProperty(_extends2, SEARCH_MARK, connectedPathOptions), _extends2)));\n          }\n        }\n\n        if (children) {\n          dig(option[fieldNames.value.children], connectedPathOptions);\n        }\n      });\n    }\n\n    dig(options.value, []); // Do sort\n\n    if (sort) {\n      filteredOptions.sort(function (a, b) {\n        return sort(a[SEARCH_MARK], b[SEARCH_MARK], search.value, fieldNames.value);\n      });\n    }\n\n    return limit > 0 ? filteredOptions.slice(0, limit) : filteredOptions;\n  });\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}