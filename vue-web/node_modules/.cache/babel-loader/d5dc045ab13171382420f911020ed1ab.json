{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { toArray } from '../utils/commonUtil';\nimport { injectPropsWithOption } from '../utils/valueUtil';\nimport { computed } from 'vue';\n\nfunction includes(test, search) {\n  return toArray(test).join('').toUpperCase().includes(search);\n}\n\nexport default (function (options, fieldNames, searchValue, filterOption, optionFilterProp) {\n  return computed(function () {\n    var searchValueVal = searchValue.value;\n    var optionFilterPropValue = optionFilterProp === null || optionFilterProp === void 0 ? void 0 : optionFilterProp.value;\n    var filterOptionValue = filterOption === null || filterOption === void 0 ? void 0 : filterOption.value;\n\n    if (!searchValueVal || filterOptionValue === false) {\n      return options.value;\n    }\n\n    var _fieldNames$value = fieldNames.value,\n        fieldOptions = _fieldNames$value.options,\n        fieldLabel = _fieldNames$value.label,\n        fieldValue = _fieldNames$value.value;\n    var filteredOptions = [];\n    var customizeFilter = typeof filterOptionValue === 'function';\n    var upperSearch = searchValueVal.toUpperCase();\n    var filterFunc = customizeFilter ? filterOptionValue : function (_, option) {\n      // Use provided `optionFilterProp`\n      if (optionFilterPropValue) {\n        return includes(option[optionFilterPropValue], upperSearch);\n      } // Auto select `label` or `value` by option type\n\n\n      if (option[fieldOptions]) {\n        // hack `fieldLabel` since `OptionGroup` children is not `label`\n        return includes(option[fieldLabel !== 'children' ? fieldLabel : 'label'], upperSearch);\n      }\n\n      return includes(option[fieldValue], upperSearch);\n    };\n    var wrapOption = customizeFilter ? function (opt) {\n      return injectPropsWithOption(opt);\n    } : function (opt) {\n      return opt;\n    };\n    options.value.forEach(function (item) {\n      // Group should check child options\n      if (item[fieldOptions]) {\n        // Check group first\n        var matchGroup = filterFunc(searchValueVal, wrapOption(item));\n\n        if (matchGroup) {\n          filteredOptions.push(item);\n        } else {\n          // Check option\n          var subOptions = item[fieldOptions].filter(function (subItem) {\n            return filterFunc(searchValueVal, wrapOption(subItem));\n          });\n\n          if (subOptions.length) {\n            filteredOptions.push(_extends(_extends({}, item), _defineProperty({}, fieldOptions, subOptions)));\n          }\n        }\n\n        return;\n      }\n\n      if (filterFunc(searchValueVal, wrapOption(item))) {\n        filteredOptions.push(item);\n      }\n    });\n    return filteredOptions;\n  });\n});","map":{"version":3,"names":["_defineProperty","_extends","toArray","injectPropsWithOption","computed","includes","test","search","join","toUpperCase","options","fieldNames","searchValue","filterOption","optionFilterProp","searchValueVal","value","optionFilterPropValue","filterOptionValue","_fieldNames$value","fieldOptions","fieldLabel","label","fieldValue","filteredOptions","customizeFilter","upperSearch","filterFunc","_","option","wrapOption","opt","forEach","item","matchGroup","push","subOptions","filter","subItem","length"],"sources":["C:/Users/USTC/Desktop/community1/vue-web/node_modules/ant-design-vue/es/vc-select/hooks/useFilterOptions.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _extends from \"@babel/runtime/helpers/esm/extends\";\nimport { toArray } from '../utils/commonUtil';\nimport { injectPropsWithOption } from '../utils/valueUtil';\nimport { computed } from 'vue';\n\nfunction includes(test, search) {\n  return toArray(test).join('').toUpperCase().includes(search);\n}\n\nexport default (function (options, fieldNames, searchValue, filterOption, optionFilterProp) {\n  return computed(function () {\n    var searchValueVal = searchValue.value;\n    var optionFilterPropValue = optionFilterProp === null || optionFilterProp === void 0 ? void 0 : optionFilterProp.value;\n    var filterOptionValue = filterOption === null || filterOption === void 0 ? void 0 : filterOption.value;\n\n    if (!searchValueVal || filterOptionValue === false) {\n      return options.value;\n    }\n\n    var _fieldNames$value = fieldNames.value,\n        fieldOptions = _fieldNames$value.options,\n        fieldLabel = _fieldNames$value.label,\n        fieldValue = _fieldNames$value.value;\n    var filteredOptions = [];\n    var customizeFilter = typeof filterOptionValue === 'function';\n    var upperSearch = searchValueVal.toUpperCase();\n    var filterFunc = customizeFilter ? filterOptionValue : function (_, option) {\n      // Use provided `optionFilterProp`\n      if (optionFilterPropValue) {\n        return includes(option[optionFilterPropValue], upperSearch);\n      } // Auto select `label` or `value` by option type\n\n\n      if (option[fieldOptions]) {\n        // hack `fieldLabel` since `OptionGroup` children is not `label`\n        return includes(option[fieldLabel !== 'children' ? fieldLabel : 'label'], upperSearch);\n      }\n\n      return includes(option[fieldValue], upperSearch);\n    };\n    var wrapOption = customizeFilter ? function (opt) {\n      return injectPropsWithOption(opt);\n    } : function (opt) {\n      return opt;\n    };\n    options.value.forEach(function (item) {\n      // Group should check child options\n      if (item[fieldOptions]) {\n        // Check group first\n        var matchGroup = filterFunc(searchValueVal, wrapOption(item));\n\n        if (matchGroup) {\n          filteredOptions.push(item);\n        } else {\n          // Check option\n          var subOptions = item[fieldOptions].filter(function (subItem) {\n            return filterFunc(searchValueVal, wrapOption(subItem));\n          });\n\n          if (subOptions.length) {\n            filteredOptions.push(_extends(_extends({}, item), _defineProperty({}, fieldOptions, subOptions)));\n          }\n        }\n\n        return;\n      }\n\n      if (filterFunc(searchValueVal, wrapOption(item))) {\n        filteredOptions.push(item);\n      }\n    });\n    return filteredOptions;\n  });\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}