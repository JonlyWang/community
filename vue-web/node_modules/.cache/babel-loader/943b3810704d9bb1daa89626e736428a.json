{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createVNode as _createVNode } from \"vue\";\nimport KeyCode from '../_util/KeyCode';\nimport TextArea from '../input/TextArea';\nimport EnterOutlined from \"@ant-design/icons-vue/es/icons/EnterOutlined\";\nimport { defineComponent, ref, reactive, watch, onMounted, computed } from 'vue';\n\nvar editableProps = function editableProps() {\n  return {\n    prefixCls: String,\n    value: String,\n    maxlength: Number,\n    autoSize: {\n      type: [Boolean, Object]\n    },\n    onSave: Function,\n    onCancel: Function,\n    onEnd: Function,\n    onChange: Function,\n    originContent: String,\n    direction: String\n  };\n};\n\nvar Editable = defineComponent({\n  name: 'Editable',\n  props: editableProps(),\n  // emits: ['save', 'cancel', 'end', 'change'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots;\n    var state = reactive({\n      current: props.value || '',\n      lastKeyCode: undefined,\n      inComposition: false,\n      cancelFlag: false\n    });\n    watch(function () {\n      return props.value;\n    }, function (current) {\n      state.current = current;\n    });\n    var textArea = ref();\n    onMounted(function () {\n      var _a;\n\n      if (textArea.value) {\n        var resizableTextArea = (_a = textArea.value) === null || _a === void 0 ? void 0 : _a.resizableTextArea;\n        var innerTextArea = resizableTextArea === null || resizableTextArea === void 0 ? void 0 : resizableTextArea.textArea;\n        innerTextArea.focus();\n        var length = innerTextArea.value.length;\n        innerTextArea.setSelectionRange(length, length);\n      }\n    });\n\n    function saveTextAreaRef(node) {\n      textArea.value = node;\n    }\n\n    function onChange(_ref2) {\n      var value = _ref2.target.value;\n      state.current = value.replace(/[\\r\\n]/g, '');\n      emit('change', state.current);\n    }\n\n    function onCompositionStart() {\n      state.inComposition = true;\n    }\n\n    function onCompositionEnd() {\n      state.inComposition = false;\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === KeyCode.ENTER) {\n        e.preventDefault();\n      } // We don't record keyCode when IME is using\n\n\n      if (state.inComposition) return;\n      state.lastKeyCode = keyCode;\n    }\n\n    function onKeyUp(e) {\n      var keyCode = e.keyCode,\n          ctrlKey = e.ctrlKey,\n          altKey = e.altKey,\n          metaKey = e.metaKey,\n          shiftKey = e.shiftKey; // Check if it's a real key\n\n      if (state.lastKeyCode === keyCode && !state.inComposition && !ctrlKey && !altKey && !metaKey && !shiftKey) {\n        if (keyCode === KeyCode.ENTER) {\n          confirmChange();\n          emit('end');\n        } else if (keyCode === KeyCode.ESC) {\n          state.current = props.originContent;\n          emit('cancel');\n        }\n      }\n    }\n\n    function onBlur() {\n      confirmChange();\n    }\n\n    function confirmChange() {\n      emit('save', state.current.trim());\n    }\n\n    var textAreaClassName = computed(function () {\n      var _ref3;\n\n      return _ref3 = {}, _defineProperty(_ref3, \"\".concat(props.prefixCls), true), _defineProperty(_ref3, \"\".concat(props.prefixCls, \"-edit-content\"), true), _defineProperty(_ref3, \"\".concat(props.prefixCls, \"-rtl\"), props.direction === 'rtl'), _ref3;\n    });\n    return function () {\n      return _createVNode(\"div\", {\n        \"class\": textAreaClassName.value\n      }, [_createVNode(TextArea, {\n        \"ref\": saveTextAreaRef,\n        \"maxlength\": props.maxlength,\n        \"value\": state.current,\n        \"onChange\": onChange,\n        \"onKeydown\": onKeyDown,\n        \"onKeyup\": onKeyUp,\n        \"onCompositionstart\": onCompositionStart,\n        \"onCompositionend\": onCompositionEnd,\n        \"onBlur\": onBlur,\n        \"rows\": 1,\n        \"autoSize\": props.autoSize === undefined || props.autoSize\n      }, null), slots.enterIcon ? slots.enterIcon({\n        className: \"\".concat(props.prefixCls, \"-edit-content-confirm\")\n      }) : _createVNode(EnterOutlined, {\n        \"class\": \"\".concat(props.prefixCls, \"-edit-content-confirm\")\n      }, null)]);\n    };\n  }\n});\nexport default Editable;","map":{"version":3,"names":["_defineProperty","createVNode","_createVNode","KeyCode","TextArea","EnterOutlined","defineComponent","ref","reactive","watch","onMounted","computed","editableProps","prefixCls","String","value","maxlength","Number","autoSize","type","Boolean","Object","onSave","Function","onCancel","onEnd","onChange","originContent","direction","Editable","name","props","setup","_ref","emit","slots","state","current","lastKeyCode","undefined","inComposition","cancelFlag","textArea","_a","resizableTextArea","innerTextArea","focus","length","setSelectionRange","saveTextAreaRef","node","_ref2","target","replace","onCompositionStart","onCompositionEnd","onKeyDown","e","keyCode","ENTER","preventDefault","onKeyUp","ctrlKey","altKey","metaKey","shiftKey","confirmChange","ESC","onBlur","trim","textAreaClassName","_ref3","concat","enterIcon","className"],"sources":["C:/Users/USTC/Desktop/community1/vue-web/node_modules/ant-design-vue/es/typography/Editable.js"],"sourcesContent":["import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { createVNode as _createVNode } from \"vue\";\nimport KeyCode from '../_util/KeyCode';\nimport TextArea from '../input/TextArea';\nimport EnterOutlined from \"@ant-design/icons-vue/es/icons/EnterOutlined\";\nimport { defineComponent, ref, reactive, watch, onMounted, computed } from 'vue';\n\nvar editableProps = function editableProps() {\n  return {\n    prefixCls: String,\n    value: String,\n    maxlength: Number,\n    autoSize: {\n      type: [Boolean, Object]\n    },\n    onSave: Function,\n    onCancel: Function,\n    onEnd: Function,\n    onChange: Function,\n    originContent: String,\n    direction: String\n  };\n};\n\nvar Editable = defineComponent({\n  name: 'Editable',\n  props: editableProps(),\n  // emits: ['save', 'cancel', 'end', 'change'],\n  setup: function setup(props, _ref) {\n    var emit = _ref.emit,\n        slots = _ref.slots;\n    var state = reactive({\n      current: props.value || '',\n      lastKeyCode: undefined,\n      inComposition: false,\n      cancelFlag: false\n    });\n    watch(function () {\n      return props.value;\n    }, function (current) {\n      state.current = current;\n    });\n    var textArea = ref();\n    onMounted(function () {\n      var _a;\n\n      if (textArea.value) {\n        var resizableTextArea = (_a = textArea.value) === null || _a === void 0 ? void 0 : _a.resizableTextArea;\n        var innerTextArea = resizableTextArea === null || resizableTextArea === void 0 ? void 0 : resizableTextArea.textArea;\n        innerTextArea.focus();\n        var length = innerTextArea.value.length;\n        innerTextArea.setSelectionRange(length, length);\n      }\n    });\n\n    function saveTextAreaRef(node) {\n      textArea.value = node;\n    }\n\n    function onChange(_ref2) {\n      var value = _ref2.target.value;\n      state.current = value.replace(/[\\r\\n]/g, '');\n      emit('change', state.current);\n    }\n\n    function onCompositionStart() {\n      state.inComposition = true;\n    }\n\n    function onCompositionEnd() {\n      state.inComposition = false;\n    }\n\n    function onKeyDown(e) {\n      var keyCode = e.keyCode;\n\n      if (keyCode === KeyCode.ENTER) {\n        e.preventDefault();\n      } // We don't record keyCode when IME is using\n\n\n      if (state.inComposition) return;\n      state.lastKeyCode = keyCode;\n    }\n\n    function onKeyUp(e) {\n      var keyCode = e.keyCode,\n          ctrlKey = e.ctrlKey,\n          altKey = e.altKey,\n          metaKey = e.metaKey,\n          shiftKey = e.shiftKey; // Check if it's a real key\n\n      if (state.lastKeyCode === keyCode && !state.inComposition && !ctrlKey && !altKey && !metaKey && !shiftKey) {\n        if (keyCode === KeyCode.ENTER) {\n          confirmChange();\n          emit('end');\n        } else if (keyCode === KeyCode.ESC) {\n          state.current = props.originContent;\n          emit('cancel');\n        }\n      }\n    }\n\n    function onBlur() {\n      confirmChange();\n    }\n\n    function confirmChange() {\n      emit('save', state.current.trim());\n    }\n\n    var textAreaClassName = computed(function () {\n      var _ref3;\n\n      return _ref3 = {}, _defineProperty(_ref3, \"\".concat(props.prefixCls), true), _defineProperty(_ref3, \"\".concat(props.prefixCls, \"-edit-content\"), true), _defineProperty(_ref3, \"\".concat(props.prefixCls, \"-rtl\"), props.direction === 'rtl'), _ref3;\n    });\n    return function () {\n      return _createVNode(\"div\", {\n        \"class\": textAreaClassName.value\n      }, [_createVNode(TextArea, {\n        \"ref\": saveTextAreaRef,\n        \"maxlength\": props.maxlength,\n        \"value\": state.current,\n        \"onChange\": onChange,\n        \"onKeydown\": onKeyDown,\n        \"onKeyup\": onKeyUp,\n        \"onCompositionstart\": onCompositionStart,\n        \"onCompositionend\": onCompositionEnd,\n        \"onBlur\": onBlur,\n        \"rows\": 1,\n        \"autoSize\": props.autoSize === undefined || props.autoSize\n      }, null), slots.enterIcon ? slots.enterIcon({\n        className: \"\".concat(props.prefixCls, \"-edit-content-confirm\")\n      }) : _createVNode(EnterOutlined, {\n        \"class\": \"\".concat(props.prefixCls, \"-edit-content-confirm\")\n      }, null)]);\n    };\n  }\n});\nexport default Editable;"],"mappings":"AAAA,OAAOA,eAAP,MAA4B,2CAA5B;AACA,SAASC,WAAW,IAAIC,YAAxB,QAA4C,KAA5C;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,aAAP,MAA0B,8CAA1B;AACA,SAASC,eAAT,EAA0BC,GAA1B,EAA+BC,QAA/B,EAAyCC,KAAzC,EAAgDC,SAAhD,EAA2DC,QAA3D,QAA2E,KAA3E;;AAEA,IAAIC,aAAa,GAAG,SAASA,aAAT,GAAyB;EAC3C,OAAO;IACLC,SAAS,EAAEC,MADN;IAELC,KAAK,EAAED,MAFF;IAGLE,SAAS,EAAEC,MAHN;IAILC,QAAQ,EAAE;MACRC,IAAI,EAAE,CAACC,OAAD,EAAUC,MAAV;IADE,CAJL;IAOLC,MAAM,EAAEC,QAPH;IAQLC,QAAQ,EAAED,QARL;IASLE,KAAK,EAAEF,QATF;IAULG,QAAQ,EAAEH,QAVL;IAWLI,aAAa,EAAEb,MAXV;IAYLc,SAAS,EAAEd;EAZN,CAAP;AAcD,CAfD;;AAiBA,IAAIe,QAAQ,GAAGvB,eAAe,CAAC;EAC7BwB,IAAI,EAAE,UADuB;EAE7BC,KAAK,EAAEnB,aAAa,EAFS;EAG7B;EACAoB,KAAK,EAAE,SAASA,KAAT,CAAeD,KAAf,EAAsBE,IAAtB,EAA4B;IACjC,IAAIC,IAAI,GAAGD,IAAI,CAACC,IAAhB;IAAA,IACIC,KAAK,GAAGF,IAAI,CAACE,KADjB;IAEA,IAAIC,KAAK,GAAG5B,QAAQ,CAAC;MACnB6B,OAAO,EAAEN,KAAK,CAAChB,KAAN,IAAe,EADL;MAEnBuB,WAAW,EAAEC,SAFM;MAGnBC,aAAa,EAAE,KAHI;MAInBC,UAAU,EAAE;IAJO,CAAD,CAApB;IAMAhC,KAAK,CAAC,YAAY;MAChB,OAAOsB,KAAK,CAAChB,KAAb;IACD,CAFI,EAEF,UAAUsB,OAAV,EAAmB;MACpBD,KAAK,CAACC,OAAN,GAAgBA,OAAhB;IACD,CAJI,CAAL;IAKA,IAAIK,QAAQ,GAAGnC,GAAG,EAAlB;IACAG,SAAS,CAAC,YAAY;MACpB,IAAIiC,EAAJ;;MAEA,IAAID,QAAQ,CAAC3B,KAAb,EAAoB;QAClB,IAAI6B,iBAAiB,GAAG,CAACD,EAAE,GAAGD,QAAQ,CAAC3B,KAAf,MAA0B,IAA1B,IAAkC4B,EAAE,KAAK,KAAK,CAA9C,GAAkD,KAAK,CAAvD,GAA2DA,EAAE,CAACC,iBAAtF;QACA,IAAIC,aAAa,GAAGD,iBAAiB,KAAK,IAAtB,IAA8BA,iBAAiB,KAAK,KAAK,CAAzD,GAA6D,KAAK,CAAlE,GAAsEA,iBAAiB,CAACF,QAA5G;QACAG,aAAa,CAACC,KAAd;QACA,IAAIC,MAAM,GAAGF,aAAa,CAAC9B,KAAd,CAAoBgC,MAAjC;QACAF,aAAa,CAACG,iBAAd,CAAgCD,MAAhC,EAAwCA,MAAxC;MACD;IACF,CAVQ,CAAT;;IAYA,SAASE,eAAT,CAAyBC,IAAzB,EAA+B;MAC7BR,QAAQ,CAAC3B,KAAT,GAAiBmC,IAAjB;IACD;;IAED,SAASxB,QAAT,CAAkByB,KAAlB,EAAyB;MACvB,IAAIpC,KAAK,GAAGoC,KAAK,CAACC,MAAN,CAAarC,KAAzB;MACAqB,KAAK,CAACC,OAAN,GAAgBtB,KAAK,CAACsC,OAAN,CAAc,SAAd,EAAyB,EAAzB,CAAhB;MACAnB,IAAI,CAAC,QAAD,EAAWE,KAAK,CAACC,OAAjB,CAAJ;IACD;;IAED,SAASiB,kBAAT,GAA8B;MAC5BlB,KAAK,CAACI,aAAN,GAAsB,IAAtB;IACD;;IAED,SAASe,gBAAT,GAA4B;MAC1BnB,KAAK,CAACI,aAAN,GAAsB,KAAtB;IACD;;IAED,SAASgB,SAAT,CAAmBC,CAAnB,EAAsB;MACpB,IAAIC,OAAO,GAAGD,CAAC,CAACC,OAAhB;;MAEA,IAAIA,OAAO,KAAKvD,OAAO,CAACwD,KAAxB,EAA+B;QAC7BF,CAAC,CAACG,cAAF;MACD,CALmB,CAKlB;;;MAGF,IAAIxB,KAAK,CAACI,aAAV,EAAyB;MACzBJ,KAAK,CAACE,WAAN,GAAoBoB,OAApB;IACD;;IAED,SAASG,OAAT,CAAiBJ,CAAjB,EAAoB;MAClB,IAAIC,OAAO,GAAGD,CAAC,CAACC,OAAhB;MAAA,IACII,OAAO,GAAGL,CAAC,CAACK,OADhB;MAAA,IAEIC,MAAM,GAAGN,CAAC,CAACM,MAFf;MAAA,IAGIC,OAAO,GAAGP,CAAC,CAACO,OAHhB;MAAA,IAIIC,QAAQ,GAAGR,CAAC,CAACQ,QAJjB,CADkB,CAKS;;MAE3B,IAAI7B,KAAK,CAACE,WAAN,KAAsBoB,OAAtB,IAAiC,CAACtB,KAAK,CAACI,aAAxC,IAAyD,CAACsB,OAA1D,IAAqE,CAACC,MAAtE,IAAgF,CAACC,OAAjF,IAA4F,CAACC,QAAjG,EAA2G;QACzG,IAAIP,OAAO,KAAKvD,OAAO,CAACwD,KAAxB,EAA+B;UAC7BO,aAAa;UACbhC,IAAI,CAAC,KAAD,CAAJ;QACD,CAHD,MAGO,IAAIwB,OAAO,KAAKvD,OAAO,CAACgE,GAAxB,EAA6B;UAClC/B,KAAK,CAACC,OAAN,GAAgBN,KAAK,CAACJ,aAAtB;UACAO,IAAI,CAAC,QAAD,CAAJ;QACD;MACF;IACF;;IAED,SAASkC,MAAT,GAAkB;MAChBF,aAAa;IACd;;IAED,SAASA,aAAT,GAAyB;MACvBhC,IAAI,CAAC,MAAD,EAASE,KAAK,CAACC,OAAN,CAAcgC,IAAd,EAAT,CAAJ;IACD;;IAED,IAAIC,iBAAiB,GAAG3D,QAAQ,CAAC,YAAY;MAC3C,IAAI4D,KAAJ;;MAEA,OAAOA,KAAK,GAAG,EAAR,EAAYvE,eAAe,CAACuE,KAAD,EAAQ,GAAGC,MAAH,CAAUzC,KAAK,CAAClB,SAAhB,CAAR,EAAoC,IAApC,CAA3B,EAAsEb,eAAe,CAACuE,KAAD,EAAQ,GAAGC,MAAH,CAAUzC,KAAK,CAAClB,SAAhB,EAA2B,eAA3B,CAAR,EAAqD,IAArD,CAArF,EAAiJb,eAAe,CAACuE,KAAD,EAAQ,GAAGC,MAAH,CAAUzC,KAAK,CAAClB,SAAhB,EAA2B,MAA3B,CAAR,EAA4CkB,KAAK,CAACH,SAAN,KAAoB,KAAhE,CAAhK,EAAwO2C,KAA/O;IACD,CAJ+B,CAAhC;IAKA,OAAO,YAAY;MACjB,OAAOrE,YAAY,CAAC,KAAD,EAAQ;QACzB,SAASoE,iBAAiB,CAACvD;MADF,CAAR,EAEhB,CAACb,YAAY,CAACE,QAAD,EAAW;QACzB,OAAO6C,eADkB;QAEzB,aAAalB,KAAK,CAACf,SAFM;QAGzB,SAASoB,KAAK,CAACC,OAHU;QAIzB,YAAYX,QAJa;QAKzB,aAAa8B,SALY;QAMzB,WAAWK,OANc;QAOzB,sBAAsBP,kBAPG;QAQzB,oBAAoBC,gBARK;QASzB,UAAUa,MATe;QAUzB,QAAQ,CAViB;QAWzB,YAAYrC,KAAK,CAACb,QAAN,KAAmBqB,SAAnB,IAAgCR,KAAK,CAACb;MAXzB,CAAX,EAYb,IAZa,CAAb,EAYOiB,KAAK,CAACsC,SAAN,GAAkBtC,KAAK,CAACsC,SAAN,CAAgB;QAC1CC,SAAS,EAAE,GAAGF,MAAH,CAAUzC,KAAK,CAAClB,SAAhB,EAA2B,uBAA3B;MAD+B,CAAhB,CAAlB,GAELX,YAAY,CAACG,aAAD,EAAgB;QAC/B,SAAS,GAAGmE,MAAH,CAAUzC,KAAK,CAAClB,SAAhB,EAA2B,uBAA3B;MADsB,CAAhB,EAEd,IAFc,CAdd,CAFgB,CAAnB;IAmBD,CApBD;EAqBD;AAjH4B,CAAD,CAA9B;AAmHA,eAAegB,QAAf"},"metadata":{},"sourceType":"module"}